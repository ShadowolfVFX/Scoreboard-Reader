<!DOCTYPE html>
<html>

<head>
  <title>Scoreboard Reader</title>
  <link href="./dist/output.css" rel="stylesheet">
</head>

<body class="overflow-hidden text-text select-none">
  <div class="p-4 flex h-screen gap-4">
    <!-- Left Sidebar -->
    <nav id="sidebar" class="w-fit flex flex-col flex-grow resize-x overflow-auto">
      <div class="h-full w-full bg-black/75 p-4 rounded flex flex-col">

        <header class="border-b-1">

          <div class="flex items-center">
            <img src="./dist/scoreboard-reader-a.ico" alt="logo" id="site-referral" class="w-[clamp(2rem,4vw,3rem)]">
            <h1 class="pl-2 text-[clamp(1.2rem,3vw,2.5rem)] whitespace-nowrap overflow-hidden text-ellipsis">
              Scoreboard Reader
            </h1>
          </div>

          <div class="flex items-center rounded bg-background-1 mt-2">
            <button id="open-file-button" class="rounded p-2 font-bold" title="Open File">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-6 h-6 fill-secondary">
                <path d="M128 64c0-35.3 28.7-64 64-64L352 0l0 128c0 17.7 14.3 32 32 32l128 0 0 288c0 35.3-28.7 64-64 64l-256 0c-35.3 0-64-28.7-64-64l0-112 174.1 0-39 39c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l80-80c9.4-9.4 9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l39 39L128 288l0-224zm0 224l0 48L24 336c-13.3 0-24-10.7-24-24s10.7-24 24-24l104 0zM512 128l-128 0L384 0 512 128z" />
              </svg>
            </button>
            <input type="text" id="file-path" class="w-full p-2 rounded bg-background-1" placeholder="Path to scoreboard.dat">
          </div>


        </header>

        <!-- list of objectives -->
        <ul id="objectives-list" class="h-auto min-h-40 overflow-y-auto flex-grow"></ul>
        <!-- search box -->
        <input type="text" id="search-box" class="p-2 rounded bg-background-1 mt-2" placeholder="Search Objective">

        <footer class="rounded mt-4 pt-4 text-center">
          <p>Authors: ShadowolfVFX & Bowiemtl</p>
        </footer>
      </div>

    </nav>

    <!-- Right Content -->
    <main class="flex-grow select-none col-span-2">
      <div class="h-full w-full bg-black/75 p-4 rounded-tr-3xl rounded-bl-3xl flex flex-col flex-grow items-stretch">

        <!-- Button Container (Fixed) -->
        <div class="w-full flex justify-start items-center sticky top-0 z-10 p-2">
          <button id="save-button" class="btn">Save Scores</button>
          <button id="toggle-labels-button" class="btn">Toggle Labels</button>
          <!-- TODO: these buttons need functionality. The export image is quite easy since we're dealing with a html canvas, but we can't set a resolution to it so it's adjusting to the windows resoltion which we don't want. The display mode will probably not be too hard either but you'd need to do some data parsing for that. -->
          <!-- <button id="export-button" class="btn">Export Image</button> -->
          <!-- <button id="toggle-mode-button" class="btn">Mode: percentage/value/date</button> -->
          <h1 id="total-score" class="font-bold select-none flex-1 text-center"></h1>
          <div id="output"></div>
        </div>

        <!-- Scrollable Chart Container hide-scrollbar-->
        <div id="chart-container" class="w-full flex-grow overflow-auto relative">
          <canvas id="score-canvas" class="w-full h-auto"></canvas>
        </div>
      </div>
    </main>

    <canvas id="invisible-canvas" style="display:none;"></canvas>

    <dialog id="open-site-modal" class="bg-background-1 rounded fixed inset-0 p-4 text-text">
      <h1>Do you want to open this link in your browser?</h1>
      <p><i>
          <pre>https://swfx.uk/resources/scoreboard-reader</pre>
        </i></p>
      <button class="btn" id="close-modal-button">No</button>
      <button class="btn" id="site-referral-button">Yes</button>
    </dialog>
  </div>
  <script src="renderer.js"></script>
  <script src="chart.js"></script>
</body>

</html>